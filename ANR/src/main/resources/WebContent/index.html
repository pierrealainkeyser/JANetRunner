<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/anr.css" rel="stylesheet">

<script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
<script type="text/javascript" src="js/jquery.transit.min.js"></script>
<script type="text/javascript" src="js/anr.js"></script>

<script type="text/javascript">
	$(function() {
		var main = $('div.main');
		
		var alls=[{id:'1',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/03004.png',faction:'corp'},
		        {id:'2',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/01057.png',faction:'corp'},
		        {id:'3',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/03016.png',faction:'corp'},
		      	{id:'4',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/03017.png',faction:'corp'},
		      	{id:'5',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/03020.png',faction:'corp'},
		      	{id:'6',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/03022.png',faction:'corp'},
		      	{id:'7',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/03023.png',faction:'corp'},
		      	{id:'8',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/03024.png',faction:'corp'},
		      	{id:'9',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/03026.png',faction:'corp'},
		      	{id:'10',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/02060.png',faction:'corp'},
		      	{id:'11',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/01061.png',faction:'corp'},
		      	{id:'12',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/03015.png',faction:'corp'},
		      	{id:'13',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/02089.png',faction:'runner'},
		      	{id:'14',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/02090.png',faction:'runner'},
		      	{id:'15',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/02088.png',faction:'runner'},
		      	{id:'16',url:'http://netrunnerdb.com/web/bundles/netrunnerdbcards/images/cards/en/01044.png',faction:'runner'}		      	
		];
		
		faction='corp';
		locationHandler = {
				'hq' : new CardCounter($("#hq").find("span")),
				'archives' : new CardCounter($("#archives").find("span")),
				'rd' : new CardCounter($("#rd").find("span")),
				'grip' : new CardCounter($("#grip").find("span")),
				'stack' : new CardCounter($("#stack").find("span")),
				'heap' : new CardCounter($("#heap").find("span"))
			};
		
		$("#archives").css(placeFunction['archives']());
		$("#rd").css(placeFunction['rd']());
		$("#hq").css(placeFunction['hq']());
		
		$("#grip").css(placeFunction['grip']());
		$("#stack").css(placeFunction['stack']());
		$("#heap").css(placeFunction['heap']());
	
		var cards = [];
		for(var k in alls){
			var c=createCard(alls[k],main);			
			if(c.def.faction=='corp')
				c.location({type:'rd'});
			if(c.def.faction=='runner')
				c.location({type:'stack'});
			cards.push(c);
		}

		for (var i = 0; i < cards.length; i++) {
			var c = cards[i];
			c.widget.click(function() {
				$(this).prop("card").toggle();
			});
			c.widget.mouseenter(function(){
				var card=$(this).prop("card");
				if(card.isPreviewable()){
					var prev=$("#preview");
					prev.find("img").attr("src",card.def.url);
					prev.stop().show('slide');
					$(this).prop("mouse_on_me",true);
				}
				else
					$(this).prop("mouse_on_me",false);
			});
			c.widget.mouseleave(function(){
				if($(this).prop("mouse_on_me")){
					var prev=$("#preview");
					prev.stop().hide('slide');
				}
			});
		}

		$(".faction.corp").find("a").bind('click', function() {
			var l = $(".faction.corp .expand")
			l.animate({height : 'toggle'},150);
		});
		
		$(".faction.runner").find("a").bind('click', function() {
			var l = $(".faction.runner .expand")
			l.animate({height : 'toggle'},150);
		});
	
		setTimeout(function(){
			cards[7].location({type:'server',value:{remote:0}});
			cards[4].location({type:'ice',value:{remote:0,ice:1}});			
		},1500);
		
		setTimeout(function(){			
			cards[1].location({type:'hq'});
			cards[6].location({type:'archives'});
			cards[0].location({type:'hq'});
			cards[5].location({type:'hq'});
			cards[3].location({type:'ice',value:{central:'hq',ice:2}});
			cards[2].location({type:'ice',value:{central:'hq',ice:1}});
			cards[8].location({type:'ice',value:{central:'rd',ice:1}});
			cards[9].location({type:'ice',value:{central:'rd',ice:2}});
			cards[10].location({type:'ice',value:{central:'rd',ice:3}});
			cards[14].location({type:'heap'});
			cards[15].location({type:'grip'});
		},3000);
	});
</script>
</head>
<body>	
	<div class="faction corp">
		<p>				
			<a href="#"><img src="http://netrunnerdb.com/web/bundles/netrunnerdbbuilder/images/factions/38px/weyland-consortium.png?v1.2.2" /></a>
		</p>				
		<div class="expand">
			<p title="Clicks"><span><i class="sprite click"></i></span><span>1</span></p>
			<p title="Credits"><span><i class="sprite credits"></i></span><span>6</span></p>
		</div>
	</div>

	<div class="faction runner">
		<p><a href="#"><img src="http://netrunnerdb.com/web/bundles/netrunnerdbbuilder/images/factions/38px/shaper.png?v1.2.2" /></a></p>
		<div class="expand">				
			<p title="Clicks"><span><i class="sprite click"></i></span><span>0</span></p> 
			<p title="Credits"><span><i class="sprite credits"></i></span><span>11</span></p> 
			<p title="Link"><span><i class="sprite link"></i></span><span>0</span></p> 
			<p title="Memory unit"><span><i class="sprite memory_unit"></i></span><span>4</span></p>
		</div>
	</div>		
	
	<div class="main">	
		<div id="rd" class="cardplace">R&amp;D (<span>0</span>)</div>
		<div id="hq" class="cardplace">HQ (<span>0</span>)</div>
		<div id="archives" class="cardplace">Archives (<span>0</span>)</div>	
		
		<div id="grip" class="cardplace">Grip(<span>0</span>)</div>
		<div id="heap" class="cardplace">Heap (<span>0</span>)</div>
		<div id="stack" class="cardplace">Stack (<span>0</span>)</div>	
		
		<div id="preview"><img /></div>
	</div>

</body>
</html>