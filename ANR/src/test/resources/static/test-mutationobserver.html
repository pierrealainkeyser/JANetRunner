<html>
<head>
<link rel="stylesheet/less" type="text/css" href="../../../main/resources/static/css/ngame.less" />
<link rel="stylesheet" type="text/css" href="../../../main/resources/static/css/icons.css" />

<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/less.js/2.4.0/less.js"></script>

<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.16/require.min.js"></script>
<script type="text/javascript">
	require.config({
		baseUrl : "../../../main/resources/static/js/",
		paths : { jquery : "http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min",
			underscore : "http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min",
			tweenmax : "http://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenMax.min",//
		},//
		bundles : {//
		tweenmax : [ 'TimelineLite' ] //
		},//
		shim : {//
		TimelineLite : { exports : 'TimelineLite' }, //
		} //
	});

	require([ "jquery", "TimelineLite", "anr/ncard" ],//
	function($, TimelineLite, Card) {

		$(function() {
			var body = $('.view');
			var ices = $('#virtual .ices');
			var upgrades = $('#virtual .upgrades');

			var c1 = new Card({ url : "01080.png", faction : "corp" });
			c1.element.appendTo(body);
			c1.wrapper(1).appendTo(ices);

			var c2 = new Card({ url : "01081.png", faction : "corp" });
			c2.element.appendTo(body);
			c2.wrapper(0).appendTo(ices);

			var c3 = new Card({ url : "01082.png", faction : "corp" });
			c3.element.appendTo(body);
			c3.wrapper(0).appendTo(upgrades);

			var duration = 0.75;

			var tl = new TimelineLite();
			tl.addLabel("unvisible", "=0")
			tl.addLabel("visible", "=0.5")
			tl.addLabel("middle", "=1")
			tl.addLabel("after", "=2")
			tl.addLabel("clear", "=3")

			var v1 = c1.view();
			v1.visible = false;
			v1.tween(tl, 0, "unvisible")

			var cv2 = c2.view()
			cv2.faceup = true;
			cv2.tween(tl, 0, "unvisible")

			var cv3 = c3.view()
			cv3.faceup = true;
			cv3.tween(tl, 0, "unvisible")

			if (true) {
				v1.visible = true;
				v1.tween(tl, duration, "visible")

				var v2 = c1.view();
				v2.rotation = 0;
				v2.faceup = true;
				v2.height *= 2;
				v2.width *= 2;
				v2.left = 400;
				v2.tween(tl, duration, "middle")

				c1.wrapper(0).appendTo(upgrades);
				c2.wrapper(1).appendTo(upgrades);
				c3.wrapper(1).appendTo(ices);

				cv2 = c2.view();
				cv2.faceup = false;
				cv2.tween(tl, duration, "after")

				v1 = c1.view();
				v1.faceup = true;
				v1.tween(tl, duration, "after")

				cv3 = c3.view();
				cv3.tween(tl, duration, "after")

				c2.wrapper(0).appendTo(ices);
				c1.wrapper(2).appendTo(upgrades);
				c3.wrapper(1).appendTo(upgrades);

				cv2 = c2.view();
				cv2.faceup = true;
				cv2.tween(tl, duration, "clear")

				v1 = c1.view();
				v1.faceup = true;
				v1.tween(tl, duration, "clear")

				cv3 = c3.view();
				cv3.faceup = true;
				cv3.tween(tl, duration, "clear")
			}

			tl.play()

		});
	});
</script>



</head>
<body>
	<div id="virtual" style="position: absolute;">
		<div class="server">
			<div class="ices"></div>
			<div class="upgrades"></div>
		</div>

	</div>
	<div class="view"></div>
</body>
</html>