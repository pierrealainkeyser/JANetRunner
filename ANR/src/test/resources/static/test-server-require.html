<html lang="en">
<head>
<link rel="stylesheet/less" type="text/css" href="../../../main/resources/static/css/game.less" />
<link rel="stylesheet" type="text/css" href="../../../main/resources/static/css/icons.css" />

<link rel="stylesheet" type="text/css" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.3/animate.min.css" />

<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/less.js/2.4.0/less.js"></script>

<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.16/require.min.js"></script>

<style>
.element {
	position: absolute;
	width: 80;
	height: 111;
	background-color: blue;
}
</style>

<script type="text/javascript">
	require.config({
		baseUrl : "../../../main/resources/static/js/",
		paths : { jquery : "http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min",
			underscore : "http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min",
			tweenlite : "http://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenMax.min",//
			conf : "./anr/conf" },//
		shim : {//
		tweenlite : { exports : 'TweenLite' } // 
		} //
	});

	require([ "jquery", "layout/package", "anr/corp", "ui/jquerytrackingbox", "anr/card" ],//
	function($, layout, Corp, JQueryTrackingBox, Card) {
		$(function() {
			var layoutManager = new layout.LayoutManager($("#main"));

			layoutManager.runLayout(function() {

				var h = layoutManager.container.height() - 5;

				//il faut rajouter une option pour replacer ans l'ordre sens
				var corp = new Corp(layoutManager);

				var archives = corp.getOrCreate(-1);
				var rd = corp.getOrCreate(-2);
				var hq = corp.getOrCreate(-3);
				corp.getOrCreate(-4);
				var remote2 = corp.getOrCreate(-5);

				var c = new Card(layoutManager, { url : "01083.png", faction : "corp" });
				c.setFace(Card.FACE_DOWN);

				var c1 = new Card(layoutManager, { id : "debug", url : "01089.png", faction : "corp" });
				var c3 = new Card(layoutManager, { url : "01091.png", faction : "corp" });

				var c4 = new Card(layoutManager, { url : "01082.png", faction : "corp" });

				hq.upgrades.addChild(c3);
				hq.ices.addChild(c);
				hq.ices.addChild(c1);
				hq.ices.addChild(new Card(layoutManager, { url : "01088.png", faction : "corp" }));

				hq.mainContainer.cards.addChild(new Card(layoutManager, { url : "01080.png", faction : "corp" }));
				archives.mainContainer.cards.addChild(c4);

				var trac = new JQueryTrackingBox(layoutManager, $("<div class='element' style='background-color:cyan;'/>"));
				trac.trackAbstractBox(hq.ices);

				corp.local.moveTo({ x : 5, y : h });

				setTimeout(layoutManager.withinLayout(function() {
					c3.setFace(Card.FACE_DOWN);
					rd.mainContainer.setCounter(15);

					rd.addToAssetsOrUpgrades(c1);
					remote2.addToAssetsOrUpgrades(c3);
					remote2.addToAssetsOrUpgrades(c);
					remote2.addToAssetsOrUpgrades(c4);
				}), 1000);
			});
		});
	});
</script>


</head>
<div id="main"></div>
</html>